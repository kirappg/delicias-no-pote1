<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Delícias no Pote - Bolinhos Artesanais</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Quicksand:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Quicksand', sans-serif;
            background-color: #f7fafc;
            font-weight: 700;
        }
        .container {
            max-width: 1200px;
            margin: auto;
            padding: 1.5rem;
        }
        .text-shadow-custom {
            text-shadow: 2px 2px 4px rgba(0,0,0,0.2);
        }
        .card-hover:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0,0,0,0.1);
        }
        .font-normal-override {
            font-weight: 400;
        }
        /* Animação para Fade-In */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .animate-fade-in {
            animation: fadeIn 0.8s ease-out forwards;
        }
        /* Animação para Pulse em Botões */
        @keyframes pulse-once {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }
        .btn-pulse-once:hover {
            animation: pulse-once 0.5s ease-in-out;
        }
    </style>
</head>
<body class="bg-white text-gray-800">

    <header class="bg-white shadow-sm sticky top-0 z-50 animate-fade-in">
        <div class="container flex justify-between items-center py-4">
            <a href="#" id="home-link" class="text-3xl font-extrabold text-red-600">
                Delícias no Pote
            </a>
            <nav class="hidden md:flex space-x-6 font-semibold">
                <a href="#sabores" class="text-gray-600 hover:text-red-600 transition-colors">Sabores</a>
                <a href="#sobre" class="text-gray-600 hover:text-red-600 transition-colors">Sobre Nós</a>
                <a href="#sugestoes-avaliacoes" id="sugestoes-avaliacoes-link" class="text-gray-600 hover:text-red-600 transition-colors">Sugestões & Avaliações</a>
                <a href="#contato" class="text-gray-600 hover:text-red-600 transition-colors">Contato</a>
                <button id="admin-button" class="text-gray-600 hover:text-red-600 transition-colors">Área do Administrador</button>
            </nav>
            <div class="flex items-center space-x-4">
                <button id="cart-button" class="relative text-gray-600 hover:text-red-600 transition-colors">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.182 1.702.702 1.702H19.25a.75.75 0 00.75-.75c0-.44-.30-.95-.65-1.15L17.5 13H7z" />
                    </svg>
                    <span id="cart-count" class="absolute top-0 right-0 inline-flex items-center justify-center px-2 py-1 text-xs font-bold leading-none text-red-100 transform translate-x-1/2 -translate-y-1/2 bg-red-600 rounded-full">0</span>
                </button>
            </div>
        </div>
    </header>

    <div id="main-content" class="animate-fade-in">
        <main class="container">
            <section id="hero" class="bg-red-100 rounded-3xl overflow-hidden shadow-lg mb-16 relative">
                <div class="absolute inset-0 bg-cover bg-center" style="background-image: url('https://images.unsplash.com/photo-1621946820252-8d0b27b3d1b8?ixlib=rb-1.2.1&auto=format&fit=crop&w=1920&q=80');"></div>
                <div class="relative flex flex-col items-center justify-center text-center p-12 lg:p-24 bg-red-600/80 text-white rounded-3xl">
                    <h1 class="text-4xl lg:text-6xl font-extrabold mb-4 text-shadow-custom">Os melhores bolinhos de pote da sua vida!</h1>
                    <p class="text-lg lg:text-2xl font-semibold mb-8 text-shadow-custom font-normal-override">Feitos com ingredientes selecionados e muito carinho.</p>
                    <a href="#sabores" class="bg-white text-red-600 font-extrabold py-3 px-8 rounded-full text-lg shadow-xl hover:bg-gray-200 transition-colors transform hover:scale-105 btn-pulse-once">
                        Descubra Nossos Sabores
                    </a>
                </div>
            </section>
    
            <section id="sabores" class="py-12">
                <h2 class="text-4xl font-extrabold text-center text-gray-800 mb-12">Nossos Deliciosos Sabores</h2>
                <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-8">
    
                    <div class="bg-white p-6 rounded-2xl shadow-md flex flex-col items-center text-center card-hover transition-transform duration-300">
                        <img src="https://deliciasfit.com/wp-content/uploads/2023/02/fdffa3ff5b.jpg" alt="Bolinho de pote de chocolate cremoso com granulado" class="w-full h-auto rounded-xl mb-4">
                        <h3 class="text-2xl font-extrabold mb-2">Chocolate Belga</h3>
                        <p class="text-gray-600 mb-4 flex-grow font-normal-override">Um clássico irresistível, com camadas de bolo de chocolate super fofinho e um recheio cremoso de brigadeiro belga.</p>
                        <div class="font-bold text-2xl text-red-600 mb-4">R$ 15,00</div>
                        <button class="bg-red-600 text-white font-extrabold py-2 px-6 rounded-full w-full hover:bg-red-700 transition-colors add-to-cart btn-pulse-once" data-id="1" data-name="Chocolate Belga" data-price="15.00">
                            Adicionar ao Carrinho
                        </button>
                    </div>
    
                    <div class="bg-white p-6 rounded-2xl shadow-md flex flex-col items-center text-center card-hover transition-transform duration-300">
                        <img src="https://i.pinimg.com/736x/33/77/14/337714abb3a8ff7e55b10f38c7a054a5.jpg" alt="Bolinho de pote de ninho com morangos frescos" class="w-full h-auto rounded-xl mb-4">
                        <h3 class="text-2xl font-extrabold mb-2">Ninho com Morango</h3>
                        <p class="text-gray-600 mb-4 flex-grow font-normal-override">A combinação perfeita entre a leveza do creme de leite em pó e a acidez do morango fresco.</p>
                        <div class="font-bold text-2xl text-red-600 mb-4">R$ 16,50</div>
                        <button class="bg-red-600 text-white font-extrabold py-2 px-6 rounded-full w-full hover:bg-red-700 transition-colors add-to-cart btn-pulse-once" data-id="2" data-name="Ninho com Morango" data-price="16.50">
                            Adicionar ao Carrinho
                        </button>
                    </div>
                    
                    <div class="bg-white p-6 rounded-2xl shadow-md flex flex-col items-center text-center card-hover transition-transform duration-300">
                        <img src="https://s3-sa-east-1.amazonaws.com/deliveryon-uploads/products/bombolos/58_616e2794e05eb.jpg" alt="Bolinho de pote de creme de limão com raspas" class="w-full h-auto rounded-xl mb-4">
                        <h3 class="text-2xl font-extrabold mb-2">Creme de Limão</h3>
                        <p class="text-gray-600 mb-4 flex-grow font-normal-override">Um sabor refrescante e surpreendente! Bolo de baunilha com um creme azedinho de limão, perfeito para os dias quentes.</p>
                        <div class="font-bold text-2xl text-red-600 mb-4">R$ 14,00</div>
                        <button class="bg-red-600 text-white font-extrabold py-2 px-6 rounded-full w-full hover:bg-red-700 transition-colors add-to-cart btn-pulse-once" data-id="3" data-name="Creme de Limão" data-price="14.00">
                            Adicionar ao Carrinho
                        </button>
                    </div>
                    
                    <div class="bg-white p-6 rounded-2xl shadow-md flex flex-col items-center text-center card-hover transition-transform duration-300">
                        <img src="https://i.pinimg.com/736x/35/5b/c1/355bc124ef533bc9bff9476dfab3d03a.jpg" alt="Bolinho de pote de Red Velvet com recheio de cream cheese" class="w-full h-auto rounded-xl mb-4">
                        <h3 class="text-2xl font-extrabold mb-2">Red Velvet</h3>
                        <p class="text-gray-600 mb-4 flex-grow font-normal-override">O clássico bolo americano com massa aveludada e um recheio generoso de cream cheese, uma verdadeira tentação!</p>
                        <div class="font-bold text-2xl text-red-600 mb-4">R$ 17,00</div>
                        <button class="bg-red-600 text-white font-extrabold py-2 px-6 rounded-full w-full hover:bg-red-700 transition-colors add-to-cart btn-pulse-once" data-id="4" data-name="Red Velvet" data-price="17.00">
                            Adicionar ao Carrinho
                        </button>
                    </div>

                    <div class="bg-white p-6 rounded-2xl shadow-md flex flex-col items-center text-center card-hover transition-transform duration-300">
                        <img src="https://bolosparavender.com/wp-content/uploads/2019/07/bolo-de-pote-de-pa%C3%A7oca-1200x900.jpg" alt="Bolinho de pote de paçoca cremoso com um pedaço de paçoca no topo" class="w-full h-auto rounded-xl mb-4">
                        <h3 class="text-2xl font-extrabold mb-2">Paçoca Cremosa</h3>
                        <p class="text-gray-600 mb-4 flex-grow font-normal-override">Uma explosão de sabor! Bolo de amendoim com um recheio de paçoca super cremosa, perfeito para os amantes de doce.</p>
                        <div class="font-bold text-2xl text-red-600 mb-4">R$ 15,50</div>
                        <button class="bg-red-600 text-white font-extrabold py-2 px-6 rounded-full w-full hover:bg-red-700 transition-colors add-to-cart btn-pulse-once" data-id="5" data-name="Paçoca Cremosa" data-price="15.50">
                            Adicionar ao Carrinho
                        </button>
                    </div>

                </div>
            </section>
    
            <section id="sobre" class="py-12 bg-white rounded-3xl shadow-lg my-16 p-8 md:p-12">
                <h2 class="text-4xl font-extrabold text-center text-gray-800 mb-8">Nossa História</h2>
                <div class="flex flex-col md:flex-row items-center gap-8">
                    <div class="md:w-1/2">
                        <img src="https://dcoregift.com.br/wp-content/uploads/2022/07/itens-que-ajudam.jpg" alt="Vários itens de confeitaria, como potes, colheres e doces" class="rounded-2xl shadow-md w-full">
                    </div>
                    <div class="md:w-1/2">
                        <p class="text-lg text-gray-700 leading-relaxed mb-4 font-normal-override">
                            A **Delícias no Pote** nasceu do amor por doces e da paixão em compartilhar momentos de alegria. O que começou como uma experiência na cozinha de casa, rapidamente se tornou um pequeno negócio, com a missão de levar os mais saborosos bolinhos de pote para a sua mesa.
                        </p>
                        <p class="text-lg text-gray-700 leading-relaxed font-normal-override">
                            Utilizamos apenas ingredientes de primeira linha, garantindo um sabor inesquecível em cada colherada. Cada bolinho é feito com carinho, atenção aos detalhes e a certeza de que você terá uma experiência única e deliciosa.
                        </p>
                    </div>
                </div>
            </section>

            <section id="sugestoes-avaliacoes" class="py-12 bg-white rounded-3xl shadow-lg my-16 p-8 md:p-12">
                <h2 class="text-4xl font-extrabold text-center text-gray-800 mb-8">Dê sua Opinião</h2>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                    <div>
                        <h3 class="text-3xl font-extrabold text-gray-800 mb-6 text-center md:text-left">Sugira um Sabor</h3>
                        <form id="suggestion-form" class="space-y-4 bg-gray-50 p-6 rounded-2xl shadow-sm">
                            <div>
                                <label for="sugestao-nome" class="block text-sm font-semibold text-gray-700 mb-1">Seu Nome</label>
                                <input type="text" id="sugestao-nome" name="nome" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-red-500 focus:border-red-500 font-normal-override" required>
                            </div>
                            <div>
                                <label for="sugestao-email" class="block text-sm font-semibold text-gray-700 mb-1">Seu E-mail</label>
                                <input type="email" id="sugestao-email" name="email" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-red-500 focus:border-red-500 font-normal-override" required>
                            </div>
                            <div>
                                <label for="sugestao-texto" class="block text-sm font-semibold text-gray-700 mb-1">Sugira um Sabor de Bolinho</label>
                                <textarea id="sugestao-texto" name="sugestao" rows="4" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-red-500 focus:border-red-500 font-normal-override" required></textarea>
                            </div>
                            <button type="submit" class="w-full bg-red-600 text-white font-extrabold py-3 px-6 rounded-full hover:bg-red-700 transition-colors btn-pulse-once">
                                Enviar Sugestão
                            </button>
                            <button id="generate-recipe-btn" type="button" class="w-full bg-red-500 text-white font-extrabold py-3 px-6 rounded-full hover:bg-red-600 transition-colors btn-pulse-once">
                                Gerar Receita com IA ✨
                            </button>
                        </form>
                    </div>

                    <div>
                        <h3 class="text-3xl font-extrabold text-gray-800 mb-6 text-center md:text-left">Avaliações</h3>
                        <div id="reviews-list" class="space-y-6">
                            <div class="bg-gray-50 p-6 rounded-2xl shadow-sm">
                                <p class="text-gray-700 mb-2 font-normal-override">"Os bolinhos são incríveis! O de ninho com morango é o meu favorito. Super recomendo!"</p>
                                <div class="flex items-center text-yellow-400">
                                    <span class="mr-1">⭐⭐⭐⭐⭐</span>
                                    <span class="text-gray-600 font-extrabold font-normal-override">- Maria P.</span>
                                </div>
                            </div>
                             <div class="bg-gray-50 p-6 rounded-2xl shadow-sm">
                                <p class="text-gray-700 mb-2 font-normal-override">"Entrega rápida e produto de alta qualidade. O de chocolate belga é divino!"</p>
                                <div class="flex items-center text-yellow-400">
                                    <span class="mr-1">⭐⭐⭐⭐⭐</span>
                                    <span class="text-gray-600 font-extrabold font-normal-override">- João R.</span>
                                </div>
                            </div>
                            <div class="bg-gray-50 p-6 rounded-2xl shadow-sm">
                                <p class="text-gray-700 mb-2 font-normal-override">"O bolinho de limão é super refrescante, perfeito para o calor. Vou pedir de novo com certeza!"</p>
                                <div class="flex items-center text-yellow-400">
                                    <span class="mr-1">⭐⭐⭐⭐</span>
                                    <span class="text-gray-600 font-extrabold font-normal-override">- Ana C.</span>
                                </div>
                            </div>
                        </div>

                         <div class="mt-8 bg-gray-50 p-6 rounded-2xl shadow-sm">
                            <h4 class="text-xl font-extrabold text-center mb-4">Deixe a sua Avaliação!</h4>
                            <form id="review-form" class="space-y-4">
                                <div>
                                    <label for="review-nome" class="block text-sm font-semibold text-gray-700 mb-1">Seu Nome</label>
                                    <input type="text" id="review-nome" name="nome" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-red-500 focus:border-red-500 font-normal-override" required>
                                </div>
                                <div>
                                    <label for="review-nota" class="block text-sm font-semibold text-gray-700 mb-1">Nota</label>
                                    <select id="review-nota" name="nota" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-red-500 focus:border-red-500 font-normal-override">
                                        <option value="5">⭐⭐⭐⭐⭐</option>
                                        <option value="4">⭐⭐⭐⭐</option>
                                        <option value="3">⭐⭐⭐</option>
                                        <option value="2">⭐⭐</option>
                                        <option value="1">⭐</option>
                                    </select>
                                </div>
                                <div>
                                    <label for="review-texto" class="block text-sm font-semibold text-gray-700 mb-1">Seu Comentário</label>
                                    <textarea id="review-texto" name="texto" rows="4" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-red-500 focus:border-red-500 font-normal-override" required></textarea>
                                </div>
                                <button type="submit" class="w-full bg-red-600 text-white font-extrabold py-3 px-6 rounded-full hover:bg-red-700 transition-colors btn-pulse-once">
                                    Enviar Avaliação
                                </button>
                            </form>
                         </div>
                    </div>
                </div>
            </section>
            
            <section id="contato" class="py-12">
                <h2 class="text-4xl font-extrabold text-center text-gray-800 mb-8">Entre em Contato</h2>
                <div class="bg-white p-8 rounded-3xl shadow-lg max-w-xl mx-auto">
                    <form id="contact-form" class="space-y-6">
                        <div>
                            <label for="name" class="block text-sm font-semibold text-gray-700 mb-1">Nome</label>
                            <input type="text" id="name" name="name" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-red-500 focus:border-red-500 font-normal-override">
                        </div>
                        <div>
                            <label for="email" class="block text-sm font-semibold text-gray-700 mb-1">E-mail</label>
                            <input type="email" id="email" name="email" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-red-500 focus:border-red-500 font-normal-override">
                        </div>
                        <div>
                            <label for="message" class="block text-sm font-semibold text-gray-700 mb-1">Mensagem</label>
                            <textarea id="message" name="message" rows="4" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-red-500 focus:border-red-500 font-normal-override"></textarea>
                        </div>
                        <button type="submit" class="w-full bg-red-600 text-white font-extrabold py-3 px-6 rounded-full hover:bg-red-700 transition-colors btn-pulse-once">
                            Enviar Mensagem
                        </button>
                    </form>
                </div>
            </section>
        </main>
    </div>

    <div id="admin-panel" class="hidden container py-12">
        <div class="max-w-4xl mx-auto bg-white p-8 rounded-3xl shadow-lg">
            <div id="admin-login-section">
                <h2 class="text-3xl font-extrabold text-center mb-6">Acesso Administrativo</h2>
                <p class="text-center text-gray-600 mb-6 font-normal-override">Para continuar, digite a senha de 4 dígitos.</p>
                <div class="flex justify-center space-x-2 mb-4">
                    <input type="password" id="admin-password" class="w-32 text-center px-4 py-2 border border-gray-300 rounded-lg focus:ring-red-500 focus:border-red-500 font-extrabold" maxlength="4" placeholder="Senha">
                </div>
                <p id="login-error" class="text-red-500 text-center hidden mb-4 font-normal-override">Senha incorreta. Tente novamente.</p>
                <div class="flex justify-center">
                    <button id="admin-login-btn" class="bg-red-600 text-white font-extrabold py-2 px-6 rounded-full hover:bg-red-700 transition-colors btn-pulse-once">
                        Entrar
                    </button>
                </div>
            </div>

            <div id="admin-dashboard" class="hidden">
                <div class="flex justify-between items-center mb-6">
                    <h2 class="text-3xl font-extrabold">Painel do Administrador</h2>
                    <button id="admin-logout-btn" class="bg-gray-200 text-gray-800 font-extrabold py-2 px-4 rounded-full hover:bg-gray-300 transition-colors">Sair</button>
                </div>
                
                <div class="grid grid-cols-1 md:grid-cols-2 gap-8 mt-8">
                    <div>
                        <h3 class="text-2xl font-extrabold mb-4">Pedidos Pendentes</h3>
                        <div id="orders-list" class="space-y-6">
                            <p class="text-center text-gray-500 font-normal-override">Nenhum pedido pendente.</p>
                        </div>
                    </div>
                    <div>
                        <h3 class="text-2xl font-extrabold mb-4">Sugestões de Sabores</h3>
                        <div id="suggestions-list" class="space-y-6">
                            <p class="text-center text-gray-500 font-normal-override">Nenhuma sugestão recebida.</p>
                        </div>
                    </div>
                    <div class="md:col-span-2">
                        <h3 class="text-2xl font-extrabold mb-4">Novas Avaliações</h3>
                        <div id="new-reviews-list" class="space-y-6">
                            <p class="text-center text-gray-500 font-normal-override">Nenhuma avaliação pendente.</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div id="recipe-modal" class="hidden fixed inset-0 bg-gray-900 bg-opacity-75 z-50 flex items-center justify-center p-4">
        <div class="bg-white p-6 rounded-2xl shadow-xl w-full max-w-lg relative text-center animate-fade-in">
            <button id="close-recipe-modal-btn" class="absolute top-4 right-4 text-gray-500 hover:text-gray-800">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12" />
                </svg>
            </button>
            <h3 class="text-2xl font-extrabold mb-4">Receita Criada pela IA ✨</h3>
            <p id="recipe-loader" class="text-center text-gray-500 font-normal-override">A gerar uma receita... por favor, aguarde.</p>
            <div id="recipe-content" class="text-left mt-4 hidden">
                <p class="text-sm font-normal-override">Esta receita foi gerada por inteligência artificial, inspirada na sua sugestão.</p>
                <div id="recipe-text" class="mt-4 p-4 bg-gray-50 rounded-xl font-normal-override whitespace-pre-wrap"></div>
            </div>
        </div>
    </div>


    <div id="cart-modal" class="hidden fixed inset-0 bg-gray-900 bg-opacity-75 z-50 flex items-center justify-center p-4">
        <div class="bg-white p-6 rounded-2xl shadow-xl w-full max-w-xs relative animate-fade-in">
            <button id="close-modal-btn" class="absolute top-4 right-4 text-gray-500 hover:text-gray-800">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12" />
                </svg>
            </button>
            <h3 class="text-2xl font-extrabold mb-4 text-center">Seu Carrinho</h3>
            <div id="cart-items" class="space-y-3 max-h-52 overflow-y-auto mb-4">
            </div>

            <div id="checkout-details" class="border-t pt-2 mt-2">
                <h4 class="font-extrabold text-lg mb-2">Resumo da Compra</h4>

                <div class="space-y-1 mb-1">
                    <label for="customer-name" class="block text-sm font-semibold text-gray-700 mb-1">Seu Nome:</label>
                    <input type="text" id="customer-name" placeholder="Nome Completo" class="w-full px-4 py-2 text-sm border border-gray-300 rounded-lg focus:ring-red-500 focus:border-red-500 font-normal-override">
                </div>
                
                <div class="space-y-1 mb-1">
                    <label for="cep-input" class="block text-sm font-semibold text-gray-700 mb-1">CEP:</label>
                    <input type="text" id="cep-input" placeholder="00000-000" class="w-full px-4 py-2 text-sm border border-gray-300 rounded-lg focus:ring-red-500 focus:border-red-500 font-normal-override">
                    <p id="cep-message" class="text-xs text-gray-500 mt-1 hidden"></p>
                </div>
                
                <div class="space-y-1 mb-1">
                    <label for="address-rua" class="block text-sm font-semibold text-gray-700 mb-1">Endereço:</label>
                    <input type="text" id="address-rua" placeholder="Rua, número" class="w-full px-4 py-2 text-sm border border-gray-300 rounded-lg focus:ring-red-500 focus:border-red-500 font-normal-override mb-1">
                    <input type="text" id="address-bairro" placeholder="Bairro" class="w-full px-4 py-2 text-sm border border-gray-300 rounded-lg focus:ring-red-500 focus:border-red-500 font-normal-override mb-1">
                    <div class="flex space-x-2">
                        <input type="text" id="address-cidade" placeholder="Cidade" class="w-1/2 px-4 py-2 text-sm border border-gray-300 rounded-lg focus:ring-red-500 focus:border-red-500 font-normal-override">
                        <input type="text" id="address-estado" placeholder="Estado" class="w-1/2 px-4 py-2 text-sm border border-gray-300 rounded-lg focus:ring-red-500 focus:border-red-500 font-normal-override">
                    </div>
                </div>

                <div class="mb-2">
                    <p class="block text-sm font-semibold text-gray-700 mb-1">Forma de Pagamento:</p>
                    <div class="space-y-1">
                         <label class="block">
                            <input type="radio" name="payment-method" value="Dinheiro" class="mr-2">
                            Dinheiro
                        </label>
                        <label class="block">
                            <input type="radio" name="payment-method" value="Pix" class="mr-2" checked>
                            Pix
                        </label>
                        <label class="block">
                            <input type="radio" name="payment-method" value="Cartão" class="mr-2">
                            Cartão (Débito ou Crédito)
                        </label>
                    </div>
                </div>
                
                <div id="payment-info-container">
                    <div id="pix-info">
                         <div class="p-3 bg-gray-100 rounded-lg text-center font-normal-override">
                            <p class="text-red-500 mb-2 font-extrabold">ATENÇÃO: Pagamento será efetuado com o motoboy.</p>
                        </div>
                    </div>

                    <div id="money-info" class="hidden">
                        <div class="p-3 bg-gray-100 rounded-lg text-center font-normal-override">
                            <p class="text-red-500 mb-2 font-extrabold">ATENÇÃO: Pagamento em dinheiro com o motoboy.</p>
                            <p class="font-extrabold">Prepare o valor exato ou o troco.</p>
                        </div>
                    </div>
                    
                    <div id="card-info" class="hidden">
                        <div class="p-3 bg-gray-100 rounded-lg text-center font-normal-override">
                            <p class="text-red-500 mb-2 font-extrabold">ATENÇÃO: Pagamento com cartão com o motoboy.</p>
                            <p class="font-extrabold">O entregador levará a máquina de cartão.</p>
                        </div>
                    </div>
                </div>

            </div>

            <div id="cart-summary" class="border-t pt-4 flex flex-col items-center">
                <div class="w-full">
                    <div class="flex justify-between text-base mb-1">
                        <span>Subtotal:</span>
                        <span id="cart-subtotal">R$ 0,00</span>
                    </div>
                    <div class="flex justify-between text-base mb-2">
                        <span>Frete:</span>
                        <span id="shipping-cost">R$ 0,00</span>
                    </div>
                    <div class="flex justify-between font-extrabold text-lg mb-2">
                        <span>Total a Pagar:</span>
                        <span id="cart-total">R$ 0,00</span>
                    </div>
                </div>
                <div class="flex space-x-2 mt-4 w-full">
                    <button id="continue-shopping-btn" class="flex-1 bg-gray-200 text-gray-800 font-extrabold py-3 rounded-full hover:bg-gray-300 transition-colors">
                        Continuar Comprando
                    </button>
                    <button id="checkout-button" class="flex-1 bg-red-600 text-white font-extrabold py-3 rounded-full hover:bg-red-700 transition-colors btn-pulse-once">
                        Finalizar Compra
                    </button>
                </div>
            </div>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const FREE_SHIPPING_THRESHOLD = 20.00;
            const ADMIN_PASSWORD = '1234';
            const ORDERS_KEY = 'pendingOrders';
            const SUGGESTIONS_KEY = 'flavorSuggestions';
            const REVIEWS_KEY = 'customerReviews';
            const PIX_KEY = '85992781770';
            const API_KEY = "";

            let cartItems = JSON.parse(localStorage.getItem('cartItems')) || [];
            let shippingFee = parseFloat(localStorage.getItem('shippingFee')) || 0;
            let currentCep = localStorage.getItem('currentCep') || '';
            let currentAddress = JSON.parse(localStorage.getItem('currentAddress')) || { rua: '', bairro: '', cidade: '', estado: '' };

            const cartCountElement = document.getElementById('cart-count');
            const cartModal = document.getElementById('cart-modal');
            const cartButton = document.getElementById('cart-button');
            const closeModalBtn = document.getElementById('close-modal-btn');
            const cartItemsContainer = document.getElementById('cart-items');
            const cartSubtotalElement = document.getElementById('cart-subtotal');
            const shippingCostElement = document.getElementById('shipping-cost');
            const cartTotalElement = document.getElementById('cart-total');
            const customerNameInput = document.getElementById('customer-name');
            const cepInput = document.getElementById('cep-input');
            const addressRuaInput = document.getElementById('address-rua');
            const addressBairroInput = document.getElementById('address-bairro');
            const addressCidadeInput = document.getElementById('address-cidade');
            const addressEstadoInput = document.getElementById('address-estado');
            const paymentMethodRadios = document.querySelectorAll('input[name="payment-method"]');
            const pixInfoDiv = document.getElementById('pix-info');
            const moneyInfoDiv = document.getElementById('money-info');
            const cardInfoDiv = document.getElementById('card-info');
            const mainContent = document.getElementById('main-content');
            const adminPanel = document.getElementById('admin-panel');
            const adminButton = document.getElementById('admin-button');
            const adminLoginBtn = document.getElementById('admin-login-btn');
            const adminPasswordInput = document.getElementById('admin-password');
            const loginError = document.getElementById('login-error');
            const adminDashboard = document.getElementById('admin-dashboard');
            const ordersList = document.getElementById('orders-list');
            const suggestionsList = document.getElementById('suggestions-list');
            const newReviewsList = document.getElementById('new-reviews-list');
            const adminLogoutBtn = document.getElementById('admin-logout-btn');
            const suggestionForm = document.getElementById('suggestion-form');
            const reviewForm = document.getElementById('review-form');
            const reviewsDisplayList = document.getElementById('reviews-list');
            const homeLink = document.getElementById('home-link');
            const continueShoppingBtn = document.getElementById('continue-shopping-btn');
            const generateRecipeBtn = document.getElementById('generate-recipe-btn');
            const recipeModal = document.getElementById('recipe-modal');
            const recipeLoader = document.getElementById('recipe-loader');
            const recipeContent = document.getElementById('recipe-content');
            const recipeText = document.getElementById('recipe-text');
            const closeRecipeModalBtn = document.getElementById('close-recipe-modal-btn');

            customerNameInput.value = localStorage.getItem('customerName') || '';
            cepInput.value = currentCep;
            addressRuaInput.value = currentAddress.rua;
            addressBairroInput.value = currentAddress.bairro;
            addressCidadeInput.value = currentAddress.cidade;
            addressEstadoInput.value = currentAddress.estado;
            
            const showCustomMessage = (title, message) => {
                const msgBox = document.createElement('div');
                msgBox.className = 'fixed inset-0 bg-gray-900 bg-opacity-75 z-[60] flex items-center justify-center p-4';
                msgBox.innerHTML = `
                    <div class="bg-white p-6 rounded-2xl shadow-xl w-full max-w-sm text-center relative font-normal-override">
                        <h3 class="text-xl font-extrabold mb-4">${title}</h3>
                        <p class="text-gray-700 mb-6">${message}</p>
                        <button onclick="this.parentElement.parentElement.remove()" class="bg-red-600 text-white font-extrabold py-2 px-6 rounded-full hover:bg-red-700 transition-colors">
                            Entendido
                        </button>
                    </div>
                `;
                document.body.appendChild(msgBox);
            };

            const updateCartCount = () => {
                cartCountElement.textContent = cartItems.reduce((acc, item) => acc + item.quantity, 0);
            };

            const renderCart = () => {
                cartItemsContainer.innerHTML = '';
                let subtotal = cartItems.reduce((acc, item) => acc + (item.price * item.quantity), 0);
                
                if (subtotal >= FREE_SHIPPING_THRESHOLD) {
                    shippingFee = 0;
                    document.getElementById('cep-message').textContent = 'Frete grátis para compras acima de R$ 20,00! 🎉';
                    document.getElementById('cep-message').classList.remove('text-red-600', 'hidden');
                    document.getElementById('cep-message').classList.add('text-green-600');
                } else {
                    if (currentCep) {
                        shippingFee = 5.00;
                        document.getElementById('cep-message').textContent = 'Frete calculado com sucesso!';
                        document.getElementById('cep-message').classList.remove('text-red-600', 'hidden');
                        document.getElementById('cep-message').classList.add('text-green-600');
                    } else {
                        shippingFee = 0;
                        document.getElementById('cep-message').textContent = 'Para calcular o frete, digite seu CEP.';
                        document.getElementById('cep-message').classList.remove('text-green-600', 'hidden');
                    }
                }

                if (cartItems.length === 0) {
                    cartItemsContainer.innerHTML = '<p class="text-center text-gray-500 font-normal-override">Seu carrinho está vazio.</p>';
                    subtotal = 0;
                    shippingFee = 0;
                    document.getElementById('cep-message').textContent = '';
                    document.getElementById('cep-message').classList.add('hidden');
                } else {
                    cartItems.forEach(item => {
                        const itemElement = document.createElement('div');
                        itemElement.className = 'flex items-center justify-between bg-gray-50 p-3 rounded-xl shadow-sm font-normal-override';
                        itemElement.innerHTML = `
                            <div>
                                <h4 class="font-extrabold">${item.name}</h4>
                                <p class="text-sm text-gray-500 font-normal-override">R$ ${item.price.toFixed(2)} x ${item.quantity}</p>
                            </div>
                            <div class="flex items-center space-x-2">
                                <button class="remove-item-btn text-red-600 hover:text-red-700 transition-colors" data-id="${item.id}">
                                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                                        <path stroke-linecap="round" stroke-linejoin="round" d="M19 7l-.867 12.142A2 2 0 0116.094 21H7.906a2 2 0 01-1.932-1.858L5 7m5-2h4m-4 0a1 1 0 011-1h2a1 1 0 011 1m-5 0v.5a2 2 0 002 2h4a2 2 0 002-2V5" />
                                    </svg>
                                </button>
                            </div>
                        `;
                        cartItemsContainer.appendChild(itemElement);
                    });
                }
                
                cartSubtotalElement.textContent = `R$ ${subtotal.toFixed(2)}`;
                shippingCostElement.textContent = `R$ ${shippingFee.toFixed(2)}`;
                cartTotalElement.textContent = `R$ ${(subtotal + shippingFee).toFixed(2)}`;
            };
            
            const fetchAddressByCep = async (cep) => {
                cep = cep.replace(/\D/g, '');
                if (cep.length !== 8) return;

                document.getElementById('cep-message').textContent = 'Buscando endereço...';
                document.getElementById('cep-message').classList.remove('hidden');
                
                try {
                    const response = await fetch(`https://viacep.com.br/ws/${cep}/json/`);
                    const data = await response.json();

                    if (!data.erro) {
                        addressRuaInput.value = data.logradouro;
                        addressBairroInput.value = data.bairro;
                        addressCidadeInput.value = data.localidade;
                        addressEstadoInput.value = data.uf;
                        document.getElementById('cep-message').textContent = 'Endereço encontrado!';
                        document.getElementById('cep-message').classList.remove('text-red-600');
                        document.getElementById('cep-message').classList.add('text-green-600');
                    } else {
                        document.getElementById('cep-message').textContent = 'CEP não encontrado. Preencha o endereço manualmente.';
                        document.getElementById('cep-message').classList.remove('text-green-600');
                        document.getElementById('cep-message').classList.add('text-red-600');
                    }
                } catch (error) {
                    document.getElementById('cep-message').textContent = 'Erro ao buscar CEP. Preencha o endereço manualmente.';
                    document.getElementById('cep-message').classList.remove('text-green-600');
                    document.getElementById('cep-message').classList.add('text-red-600');
                }
            };
            
            const renderAdminContent = () => {
                const orders = JSON.parse(localStorage.getItem(ORDERS_KEY)) || [];
                ordersList.innerHTML = '';
                if (orders.length === 0) {
                    ordersList.innerHTML = '<p class="text-center text-gray-500 font-normal-override">Nenhum pedido pendente.</p>';
                } else {
                    orders.forEach((order, index) => {
                        const orderElement = document.createElement('div');
                        orderElement.className = 'bg-gray-50 p-6 rounded-2xl shadow-sm flex flex-col sm:flex-row justify-between items-start sm:items-center space-y-4 sm:space-y-0 font-normal-override';
                        
                        const productsHtml = order.items.map(item => `
                            <p class="text-sm text-gray-700">- ${item.name} (${item.quantity})</p>
                        `).join('');

                        const shippingInfo = order.shippingFee === 0 ? 'Frete Grátis' : `R$ ${order.shippingFee.toFixed(2)}`;
                        const paymentInfo = `
                            <p>Método: ${order.paymentMethod}</p>
                            <p>Detalhes: Pagamento na entrega</p>
                        `;
                        
                        const customerName = order.customerName ? `<p>Nome do Cliente: ${order.customerName}</p>` : '';

                        orderElement.innerHTML = `
                            <div class="space-y-2">
                                <p class="text-xs text-gray-500">${new Date(order.timestamp).toLocaleString()}</p>
                                <div class="font-extrabold text-lg">Total: R$ ${order.total.toFixed(2)}</div>
                                <div class="text-sm">
                                    <p class="font-extrabold mb-1">Pagamento:</p>
                                    ${paymentInfo}
                                </div>
                                <div class="text-sm">
                                    <p class="font-extrabold mb-1">Entrega:</p>
                                    ${customerName}
                                    <p>Frete: ${shippingInfo}</p>
                                    <p>CEP: ${order.cep || 'Não informado'}</p>
                                    <p>Endereço: ${order.address.rua || ''}, ${order.address.bairro || ''} - ${order.address.cidade || ''}/${order.address.estado || ''}</p>
                                </div>
                                <div class="mt-2 text-sm text-gray-600">
                                    <span class="font-extrabold">Itens:</span>
                                    ${productsHtml}
                                </div>
                            </div>
                            <button class="finalize-btn bg-red-600 text-white font-extrabold py-2 px-4 rounded-full hover:bg-red-700 transition-colors" data-index="${index}" data-type="order">
                                Finalizar Pedido
                            </button>
                        `;
                        ordersList.appendChild(orderElement);
                    });
                }

                const suggestions = JSON.parse(localStorage.getItem(SUGGESTIONS_KEY)) || [];
                suggestionsList.innerHTML = '';
                if (suggestions.length === 0) {
                    suggestionsList.innerHTML = '<p class="text-center text-gray-500 font-normal-override">Nenhuma sugestão recebida.</p>';
                } else {
                    suggestions.forEach((sug, index) => {
                         const sugElement = document.createElement('div');
                         sugElement.className = 'bg-gray-50 p-4 rounded-xl shadow-sm font-normal-override flex justify-between items-start';
                         sugElement.innerHTML = `
                            <div>
                                <p class="text-xs text-gray-500 mb-1">${new Date(sug.timestamp).toLocaleString()}</p>
                                <p class="font-extrabold">${sug.nome}</p>
                                <p class="text-sm text-gray-600">${sug.email}</p>
                                <p class="text-lg mt-2 font-normal-override">"${sug.sugestao}"</p>
                            </div>
                            <button class="finalize-btn text-xs bg-gray-200 text-gray-800 font-extrabold py-1 px-3 rounded-full hover:bg-gray-300 transition-colors" data-index="${index}" data-type="suggestion">
                                Arquivar
                            </button>
                         `;
                         suggestionsList.appendChild(sugElement);
                    });
                }
                
                const reviews = JSON.parse(localStorage.getItem(REVIEWS_KEY)) || [];
                newReviewsList.innerHTML = '';
                if (reviews.length === 0) {
                    newReviewsList.innerHTML = '<p class="text-center text-gray-500 font-normal-override">Nenhuma avaliação pendente.</p>';
                } else {
                    reviews.forEach((rev, index) => {
                        const revElement = document.createElement('div');
                        revElement.className = 'bg-gray-50 p-4 rounded-xl shadow-sm font-normal-override flex justify-between items-start';
                        const stars = '⭐'.repeat(rev.nota);
                        revElement.innerHTML = `
                           <div>
                                <p class="text-xs text-gray-500 mb-1">${new Date(rev.timestamp).toLocaleString()}</p>
                                <p class="font-extrabold">${rev.nome} <span class="text-yellow-400">${stars}</span></p>
                                <p class="text-lg mt-2 font-normal-override">"${rev.texto}"</p>
                           </div>
                           <button class="finalize-btn text-xs bg-gray-200 text-gray-800 font-extrabold py-1 px-3 rounded-full hover:bg-gray-300 transition-colors" data-index="${index}" data-type="review">
                                Arquivar
                           </button>
                        `;
                        newReviewsList.appendChild(revElement);
                    });
                }
            };

            const renderPublicReviews = () => {
                const reviews = JSON.parse(localStorage.getItem(REVIEWS_KEY)) || [];
                reviewsDisplayList.innerHTML = '';

                if (reviews.length === 0) {
                    reviewsDisplayList.innerHTML = '<p class="text-center text-gray-500 font-normal-override">Ainda não há avaliações. Seja o primeiro a opinar!</p>';
                    return;
                }
                
                reviews.forEach(review => {
                    const reviewElement = document.createElement('div');
                    reviewElement.className = 'bg-gray-50 p-6 rounded-2xl shadow-sm';
                    const stars = '⭐'.repeat(review.nota);
                    reviewElement.innerHTML = `
                        <p class="text-gray-700 mb-2 font-normal-override">"${review.texto}"</p>
                        <div class="flex items-center text-yellow-400">
                            <span class="mr-1">${stars}</span>
                            <span class="text-gray-600 font-extrabold font-normal-override">- ${review.nome}</span>
                        </div>
                    `;
                    reviewsDisplayList.appendChild(reviewElement);
                });
            };
            
            document.querySelectorAll('.add-to-cart').forEach(button => {
                button.addEventListener('click', (e) => {
                    const id = e.target.dataset.id;
                    const name = e.target.dataset.name;
                    const price = parseFloat(e.target.dataset.price);
                    const existingItemIndex = cartItems.findIndex(item => item.id === id);

                    if (existingItemIndex > -1) {
                        cartItems[existingItemIndex].quantity += 1;
                    } else {
                        cartItems.push({ id, name, price, quantity: 1 });
                    }
                    localStorage.setItem('cartItems', JSON.stringify(cartItems));
                    updateCartCount();
                    renderCart();
                });
            });

            cartItemsContainer.addEventListener('click', (e) => {
                if (e.target.closest('.remove-item-btn')) {
                    const id = e.target.closest('.remove-item-btn').dataset.id;
                    const itemIndex = cartItems.findIndex(item => item.id === id);
                    if (itemIndex > -1) {
                        if (cartItems[itemIndex].quantity > 1) {
                            cartItems[itemIndex].quantity -= 1;
                        } else {
                            cartItems.splice(itemIndex, 1);
                        }
                    }
                    localStorage.setItem('cartItems', JSON.stringify(cartItems));
                    updateCartCount();
                    renderCart();
                }
            });

            cepInput.addEventListener('blur', (e) => {
                const cep = e.target.value;
                if (cep.length === 8) {
                    fetchAddressByCep(cep);
                } else {
                    document.getElementById('cep-message').textContent = 'CEP deve ter 8 dígitos.';
                    document.getElementById('cep-message').classList.remove('text-green-600', 'hidden');
                    document.getElementById('cep-message').classList.add('text-red-600');
                }
            });
            
            customerNameInput.addEventListener('input', (e) => {
                localStorage.setItem('customerName', e.target.value);
            });

            paymentMethodRadios.forEach(radio => {
                radio.addEventListener('change', (e) => {
                    moneyInfoDiv.classList.add('hidden');
                    pixInfoDiv.classList.add('hidden');
                    cardInfoDiv.classList.add('hidden');

                    if (e.target.value === 'Dinheiro') {
                        moneyInfoDiv.classList.remove('hidden');
                    } else if (e.target.value === 'Pix') {
                        pixInfoDiv.classList.remove('hidden');
                    } else if (e.target.value === 'Cartão') {
                        cardInfoDiv.classList.remove('hidden');
                    }
                });
            });

            cartButton.addEventListener('click', () => {
                cartModal.classList.remove('hidden');
                renderCart();
            });

            closeModalBtn.addEventListener('click', () => {
                cartModal.classList.add('hidden');
            });
            
            continueShoppingBtn.addEventListener('click', () => {
                cartModal.classList.add('hidden');
            });

            document.getElementById('checkout-button').addEventListener('click', () => {
                const customerName = customerNameInput.value.trim();
                if (!customerName) {
                    showCustomMessage('Atenção', 'Por favor, digite o seu nome para continuar.');
                    return;
                }

                if (cartItems.length === 0) {
                    showCustomMessage('Atenção', 'Seu carrinho está vazio. Adicione produtos para finalizar a compra.');
                    return;
                }
                
                const subtotal = cartItems.reduce((acc, item) => acc + (item.price * item.quantity), 0);
                const total = subtotal + shippingFee;
                const paymentMethod = document.querySelector('input[name="payment-method"]:checked').value;
                
                const address = {
                    rua: addressRuaInput.value.trim(),
                    bairro: addressBairroInput.value.trim(),
                    cidade: addressCidadeInput.value.trim(),
                    estado: addressEstadoInput.value.trim()
                };

                if (total > 0 && (!address.rua || !address.cidade || !address.estado)) {
                    showCustomMessage('Atenção', 'Por favor, preencha o seu endereço completo para que possamos enviar o pedido.');
                    return;
                }
                
                const orders = JSON.parse(localStorage.getItem(ORDERS_KEY)) || [];
                const newOrder = {
                    id: Date.now(),
                    customerName: customerName,
                    items: cartItems,
                    subtotal: subtotal,
                    shippingFee: shippingFee,
                    total: total,
                    cep: cepInput.value,
                    address: address,
                    paymentMethod: paymentMethod,
                    timestamp: new Date().toISOString()
                };
                orders.push(newOrder);
                localStorage.setItem(ORDERS_KEY, JSON.stringify(orders));
                
                cartItems = [];
                localStorage.removeItem('cartItems');
                localStorage.removeItem('shippingFee');
                localStorage.removeItem('currentCep');
                localStorage.removeItem('currentAddress');
                localStorage.removeItem('customerName');

                customerNameInput.value = '';
                cepInput.value = '';
                addressRuaInput.value = '';
                addressBairroInput.value = '';
                addressCidadeInput.value = '';
                addressEstadoInput.value = '';

                updateCartCount();
                renderCart();
                cartModal.classList.add('hidden');
                
                showCustomMessage('Pedido Enviado!', 'Seu pedido foi enviado para aprovação do administrador. O pagamento será feito na entrega. Agradecemos a preferência!');
            });

            document.getElementById('contact-form').addEventListener('submit', function(event) {
                event.preventDefault();
                showCustomMessage('Mensagem Enviada!', 'Obrigado por entrar em contato. Responderemos em breve.');
            });

            suggestionForm.addEventListener('submit', function(event) {
                event.preventDefault();
                const nome = document.getElementById('sugestao-nome').value;
                const email = document.getElementById('sugestao-email').value;
                const sugestao = document.getElementById('sugestao-texto').value;
                
                const suggestions = JSON.parse(localStorage.getItem(SUGGESTIONS_KEY)) || [];
                const newSuggestion = {
                    nome,
                    email,
                    sugestao,
                    timestamp: new Date().toISOString()
                };
                suggestions.push(newSuggestion);
                localStorage.setItem(SUGGESTIONS_KEY, JSON.stringify(suggestions));
                
                showCustomMessage('Sugestão Recebida!', 'Obrigado por sua sugestão. Sua ideia será avaliada!');
                suggestionForm.reset();
            });

            reviewForm.addEventListener('submit', function(event) {
                event.preventDefault();
                const nome = document.getElementById('review-nome').value;
                const nota = document.getElementById('review-nota').value;
                const texto = document.getElementById('review-texto').value;
                
                const reviews = JSON.parse(localStorage.getItem(REVIEWS_KEY)) || [];
                const newReview = {
                    nome,
                    nota,
                    texto,
                    timestamp: new Date().toISOString()
                };
                reviews.push(newReview);
                localStorage.setItem(REVIEWS_KEY, JSON.stringify(reviews));
                
                showCustomMessage('Avaliação Recebida!', 'Sua avaliação foi enviada com sucesso e será exibida em breve.');
                reviewForm.reset();
            });

            generateRecipeBtn.addEventListener('click', async () => {
                const suggestion = document.getElementById('sugestao-texto').value;
                if (!suggestion) {
                    showCustomMessage('Atenção', 'Por favor, escreva uma sugestão de sabor antes de gerar a receita.');
                    return;
                }

                recipeModal.classList.remove('hidden');
                recipeLoader.classList.remove('hidden');
                recipeContent.classList.add('hidden');

                const systemPrompt = "Aja como um chef de pastelaria profissional. O cliente sugeriu um sabor de 'bolo de pote'. Com base na sugestão, crie uma receita curta, criativa e deliciosa. A receita deve incluir uma lista de ingredientes e o passo a passo. Formate a resposta usando Markdown. Não inclua texto introdutório, apenas a receita.";
                const userQuery = `Sabor sugerido: ${suggestion}`;
                const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:generateContent?key=${API_KEY}`;
                
                const payload = {
                    contents: [{ parts: [{ text: userQuery }] }],
                    systemInstruction: { parts: [{ text: systemPrompt }] }
                };

                const exponentialBackoffFetch = async (url, options, maxRetries = 5, delay = 1000) => {
                    for (let i = 0; i < maxRetries; i++) {
                        try {
                            const response = await fetch(url, options);
                            if (response.ok) {
                                return response;
                            }
                        } catch (error) {
                            console.error(`Erro na requisição (tentativa ${i + 1}):`, error);
                        }
                        await new Promise(res => setTimeout(res, delay * Math.pow(2, i)));
                    }
                    throw new Error('Falha na requisição após várias tentativas.');
                };

                try {
                    const response = await exponentialBackoffFetch(apiUrl, {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify(payload)
                    });

                    const result = await response.json();
                    const generatedText = result?.candidates?.[0]?.content?.parts?.[0]?.text;

                    if (generatedText) {
                        recipeText.innerHTML = generatedText.replace(/\n/g, '<br>');
                        recipeContent.classList.remove('hidden');
                    } else {
                        recipeText.textContent = 'Não foi possível gerar a receita. Tente novamente.';
                        recipeContent.classList.remove('hidden');
                    }
                } catch (error) {
                    console.error('Erro na API:', error);
                    recipeText.textContent = 'Ocorreu um erro ao gerar a receita. Tente novamente mais tarde.';
                    recipeContent.classList.remove('hidden');
                } finally {
                    recipeLoader.classList.add('hidden');
                }
            });

            closeRecipeModalBtn.addEventListener('click', () => {
                recipeModal.classList.add('hidden');
            });


            adminButton.addEventListener('click', () => {
                mainContent.classList.add('hidden');
                adminPanel.classList.remove('hidden');
                renderAdminContent();
            });
            
            homeLink.addEventListener('click', () => {
                adminPanel.classList.add('hidden');
                mainContent.classList.remove('hidden');
            });

            document.getElementById('sugestoes-avaliacoes-link').addEventListener('click', () => {
                renderPublicReviews();
            });

            adminLoginBtn.addEventListener('click', () => {
                if (adminPasswordInput.value === ADMIN_PASSWORD) {
                    document.getElementById('admin-login-section').classList.add('hidden');
                    adminDashboard.classList.remove('hidden');
                    renderAdminContent();
                } else {
                    loginError.classList.remove('hidden');
                }
            });

            adminLogoutBtn.addEventListener('click', () => {
                adminDashboard.classList.add('hidden');
                document.getElementById('admin-login-section').classList.remove('hidden');
                adminPasswordInput.value = '';
                loginError.classList.add('hidden');
                mainContent.classList.remove('hidden');
                adminPanel.classList.add('hidden');
            });

            document.addEventListener('click', (e) => {
                if (e.target.classList.contains('finalize-btn')) {
                    const index = e.target.dataset.index;
                    const type = e.target.dataset.type;
                    
                    if (type === 'order') {
                        let orders = JSON.parse(localStorage.getItem(ORDERS_KEY)) || [];
                        orders.splice(index, 1);
                        localStorage.setItem(ORDERS_KEY, JSON.stringify(orders));
                    } else if (type === 'suggestion') {
                        let suggestions = JSON.parse(localStorage.getItem(SUGGESTIONS_KEY)) || [];
                        suggestions.splice(index, 1);
                        localStorage.setItem(SUGGESTIONS_KEY, JSON.stringify(suggestions));
                    } else if (type === 'review') {
                         let reviews = JSON.parse(localStorage.getItem(REVIEWS_KEY)) || [];
                         reviews.splice(index, 1);
                         localStorage.setItem(REVIEWS_KEY, JSON.stringify(reviews));
                    }
                    renderAdminContent();
                    renderPublicReviews();
                }
            });

            updateCartCount();
            renderCart();
            renderPublicReviews();
        });
    </script>

</body>
</html>
